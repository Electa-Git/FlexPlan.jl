<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Example scripts · FlexPlan</title><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">FlexPlan</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><span class="tocitem">Manual</span><ul><li><a class="tocitem" href="../quickguide/">Getting started</a></li><li class="is-active"><a class="tocitem" href>Example scripts</a><ul class="internal"><li><a class="tocitem" href="#How-to-run-scripts"><span>How to run scripts</span></a></li><li><a class="tocitem" href="#Step-1:-Declaration-of-the-required-packages-and-solvers"><span>Step 1: Declaration of the required packages and solvers</span></a></li><li><a class="tocitem" href="#Step-2:-Input-data"><span>Step 2: Input data</span></a></li><li><a class="tocitem" href="#Solving-the-problem"><span>Solving the problem</span></a></li><li><a class="tocitem" href="#Inspecting-your-results"><span>Inspecting your results</span></a></li></ul></li></ul></li><li><span class="tocitem">Library</span><ul><li><a class="tocitem" href="../problem_types/">Problem types</a></li><li><a class="tocitem" href="../network_formulations/">Network formulations</a></li><li><input class="collapse-toggle" id="menuitem-3-3" type="checkbox"/><label class="tocitem" for="menuitem-3-3"><span class="docs-label">Multi - period, multi-stage modelling</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../modeling_assumptions/">Modelling assumptions</a></li><li><a class="tocitem" href="../dimensions/">Model dimensions</a></li></ul></li><li><a class="tocitem" href="../data_model/">Data model</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Manual</a></li><li class="is-active"><a href>Example scripts</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Example scripts</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/Electa-Git/FlexPlan.jl/blob/master/docs/src/example_scripts.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h2 id="How-to-run-scripts"><a class="docs-heading-anchor" href="#How-to-run-scripts">How to run scripts</a><a id="How-to-run-scripts-1"></a><a class="docs-heading-anchor-permalink" href="#How-to-run-scripts" title="Permalink"></a></h2><p>A number of example scripts have been provided within <code>FlexPlan.jl</code> under <code>&quot;FlexPlan/examples&quot;</code>. The general structure of the example scripts is as follows.</p><h2 id="Step-1:-Declaration-of-the-required-packages-and-solvers"><a class="docs-heading-anchor" href="#Step-1:-Declaration-of-the-required-packages-and-solvers">Step 1: Declaration of the required packages and solvers</a><a id="Step-1:-Declaration-of-the-required-packages-and-solvers-1"></a><a class="docs-heading-anchor-permalink" href="#Step-1:-Declaration-of-the-required-packages-and-solvers" title="Permalink"></a></h2><p>The required packages for FlexPlan.jl are <code>PowerModels.jl</code> and <code>PowerModelsACDC.jl</code>. You can declare the packages as follows, and use short names to access specific functions without having to type the full package name every time.</p><pre><code class="language-julia hljs">import PowerModels; const _PM = PowerModels
import PowerModelsACDC; const _PMACDC = PowerModelsACDC
import FlexPlan; const _FP = FlexPlan</code></pre><p>Any other additional package that you might need, e.g., for printing, plotting, exporting results etc. can be declared in the same way.</p><p>Also, the solution of the problem will require an MILP solver. As <code>FlexPlan.jl</code> is in the Julia / JuMP environment, it can be interfaced with any optimisation solver. You can declare and initialize the solver as follows:</p><pre><code class="language-julia hljs">import Cbc
optimizer = _FP.optimizer_with_attributes(Cbc.Optimizer, &quot;logLevel&quot;=&gt;0)</code></pre><h2 id="Step-2:-Input-data"><a class="docs-heading-anchor" href="#Step-2:-Input-data">Step 2: Input data</a><a id="Step-2:-Input-data-1"></a><a class="docs-heading-anchor-permalink" href="#Step-2:-Input-data" title="Permalink"></a></h2><p>The data model is very similar to the <code>PowerModels.jl</code>/<code>PowerModelsACDC.jl</code> data models. As such, a data dictionary containing all information is passed to the optimisation problem. The standard network elements such as generators, buses, branches, etc. are extended with the existing and candidate storage and demand flexibility elements. The multi-network modelling functionality of the PowerModels.jl package is used to represent the different number of scenarios, planning years and planning hours within the year. The procedure is further explained under section <a href="../dimensions/#Model-dimensions">Model dimensions</a>. The package contains some sample time-series as well as grid data, which is located under <code>FlexPlan/test/data</code>. This data has been used in for the validation of the model in the FlexPlan deliverable 1.2 <a href="https://flexplan-project.eu/wp-content/uploads/2021/03/D1.2_20210325_V1.0.pdf">&quot;Probabilistic optimization of T&amp;D systems planning with high grid flexibility and its scalability&quot;</a></p><p>The data dictionary can be created by the user directly (see section <a href="../data_model/#Data-model">Data model</a> for complete description) but also provided as a MatPower file, as within PowerModels.jl. Using the MatPower file, only the grid data dictionary will be created. In order to add time-series and scenario information to the data dictionary, a number of additional functions are required. An example of the process is illustrated below for the combined T&amp;D planning model:</p><pre><code class="language-julia hljs"># Define number of hours
number_of_hours = 24
# Transmission network instance (all data preparation except for make_multinetwork() call)
t_file = &quot;./test/data/case6/case6_2030.m&quot; # Input case for transmission network

t_data = _FP.parse_file(t_file) # Parse input file to obtain data dictionary
_FP.add_dimension!(t_data, :hour, number_of_hours) # Add dimension, e.g. hours
_FP.add_dimension!(t_data, :scenario, Dict(1 =&gt; Dict{String,Any}(&quot;probability&quot;=&gt;1)), metadata = Dict{String,Any}(&quot;mc&quot;=&gt;true)) # Add dimension, e.g. scenarios
_FP.add_dimension!(t_data, :year, 1; metadata = Dict{String,Any}(&quot;scale_factor&quot;=&gt;1)) # Add_dimension, e.g. years
_FP.add_dimension!(t_data, :sub_nw, 1) # Add dimension, e.g. underlying networks
_FP.scale_data!(t_data) # Scale investment &amp; operational cost data based on planning years &amp; hours
t_data, t_loadprofile, t_genprofile = create_profile_data_italy!(t_data) # Load time series data based demand and RES profiles of the six market zones in Italy from the data folder
t_time_series = create_profile_data(number_of_hours, t_data, t_loadprofile, t_genprofile) # Create time series data to be passed to the data dictionay</code></pre><h3 id="Coupling-of-transmission-and-distribution-networks"><a class="docs-heading-anchor" href="#Coupling-of-transmission-and-distribution-networks">Coupling of transmission and distribution networks</a><a id="Coupling-of-transmission-and-distribution-networks-1"></a><a class="docs-heading-anchor-permalink" href="#Coupling-of-transmission-and-distribution-networks" title="Permalink"></a></h3><p>FlexPlan.jl provides the possiblity to couple multiple radial distribution networks to the transmission system, for solving the combined T&amp;D grid expansion problem. For the meshed transmission system the linearized &#39;DC&#39; power flow formulation is used, whereas radial networks are modelled using the linearised DistFlow model (more information can be found under section <a href="../network_formulations/#Network-formulations">Network formulations</a>).</p><p>To create the data for radial networks you can use following approach:</p><pre><code class="language-julia hljs">## Distribution network instance 1 (all data preparation except for make_multinetwork() call)

d_file     = &quot;test/data/cigre_mv_eu/cigre_mv_eu.m&quot; # Input case for distribution networks
scale_load = 1.0 # Scaling factor of loads
scale_gen  = 1.0 # Scaling factor of generators

d_data_1 = _FP.parse_file(d_file) # Parse input file to obtain data dictionary
_FP.add_dimension!(d_data_1, :hour, number_of_hours) # Add dimension, e.g. hours
_FP.add_dimension!(d_data_1, :scenario, Dict(1 =&gt; Dict{String,Any}(&quot;probability&quot;=&gt;1))) # Add dimension, e.g. scenarios
_FP.add_dimension!(d_data_1, :year, 1; metadata = Dict{String,Any}(&quot;scale_factor&quot;=&gt;1)) # Add dimension, e.g. years
_FP.add_dimension!(d_data_1, :sub_nw, 1) # Add dimension, e.g. underlying networks
_FP.shift_ids!(d_data_1, _FP.dim_length(t_data)) # Shift network IDs to avoid overwriting those of transmission network
_FP.scale_data!(d_data_1) # Scale investment &amp; operational cost data based on planning years &amp; hours
d_time_series = create_profile_data_cigre(d_data_1, number_of_hours; scale_load, scale_gen) # Load time series data based demand and RES profiles of the six market zones in Italy from the data folder
_FP.add_td_coupling_data!(t_data, d_data_1; t_bus = 1, sub_nw = 1) # Connect the first distribution network to bus 1 of transmission network.</code></pre><p>Note that a number of different distribution networks can be created in the same way. Eventually, all networks are coupled (for an example with one transmission and two distribution networks) using:</p><pre><code class="language-julia hljs">## Multinetwork data preparation

t_mn_data = _FP.make_multinetwork(t_data, t_time_series) # Merge transmission data &amp; time series data
d_data_1 = _FP.make_multinetwork(d_data_1, d_time_series) # Merge data &amp; time series data for distribution network 1
d_data_2 = _FP.make_multinetwork(d_data_2, d_time_series) # Merge data &amp; time series data for distribution network 2
d_mn_data = _FP.merge_multinetworks!(d_data_1, d_data_2, :sub_nw) # Merge the two distribution networks in a single data dictionary</code></pre><h2 id="Solving-the-problem"><a class="docs-heading-anchor" href="#Solving-the-problem">Solving the problem</a><a id="Solving-the-problem-1"></a><a class="docs-heading-anchor-permalink" href="#Solving-the-problem" title="Permalink"></a></h2><p>Finally, the problem can be solved using (example of planning problem with storage &amp; demand flexiblity candidates):</p><pre><code class="language-julia hljs">result = _FP.flex_tnep(t_mn_data, d_mn_data, _PM.DCPPowerModel, _FP.BFARadPowerModel, optimizer; setting=s)</code></pre><p>For other possible problem types and decomposed models, please check the section <a href="../problem_types/#Problem-types">Problem types</a>.</p><h2 id="Inspecting-your-results"><a class="docs-heading-anchor" href="#Inspecting-your-results">Inspecting your results</a><a id="Inspecting-your-results-1"></a><a class="docs-heading-anchor-permalink" href="#Inspecting-your-results" title="Permalink"></a></h2><p>To obtain power flow results, you can use the standard <code>print_summary</code> function of <code>PowerModels.jl</code>. Further, there are number of possibilities to plot your time series results and also a <code>.kml</code> export, if you provide the latitude and longitude of the buses as an additional entry in your <code>data[&quot;bus&quot;]</code> dictionary. Please consult <code>FlexPlan/examples</code> for different plotting possibilities.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../quickguide/">« Getting started</a><a class="docs-footer-nextpage" href="../problem_types/">Problem types »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.22 on <span class="colophon-date" title="Wednesday 17 August 2022 13:22">Wednesday 17 August 2022</span>. Using Julia version 1.7.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
