% Distribution network
%
% Based on: CIGRE TF C6.04.02, "Benchmark Systems for Network Integration of Renewable and
% Distributed Energy Resources", CIGRE, Technical Brochure 575, 2014.

function mpc = cigre
mpc.version = '2';
mpc.baseMVA = 1.0;

%% bus data
% bus_i type      pd       qd   gs   bs bus_area   vm   va base_kv zone    vmax    vmin
mpc.bus = [
     1    1   19.839    4.637    0    0        1    1    0      20    1    1.05    0.95;
     2    1    0.000    0.000    0    0        1    1    0      20    1    1.05    0.95;
     3    1    0.502    0.209    0    0        1    1    0      20    1    1.05    0.95;
     4    1    0.432    0.108    0    0        1    1    0      20    1    1.05    0.95;
     5    1    0.728    0.182    0    0        1    1    0      20    1    1.05    0.95;
     6    1    0.548    0.137    0    0        1    1    0      20    1    1.05    0.95;
     7    1    0.077    0.047    0    0        1    1    0      20    1    1.05    0.95;
     8    1    0.587    0.147    0    0        1    1    0      20    1    1.05    0.95;
     9    1    0.574    0.356    0    0        1    1    0      20    1    1.05    0.95;
    10    1    0.543    0.161    0    0        1    1    0      20    1    1.05    0.95;
    11    1    0.330    0.083    0    0        1    1    0      20    1    1.05    0.95;
    12    1   20.010    4.693    0    0        1    1    0      20    1    1.05    0.95;
    13    1    0.034    0.021    0    0        1    1    0      20    1    1.05    0.95;
    14    1    0.540    0.258    0    0        1    1    0      20    1    1.05    0.95;
    15    3    0.000    0.000    0    0        1    1    0     240    1    1.00    1.00 ;
];

%% generator data
% The last generator (bus 15) is a fictitious unit that represents the coupling with the HV network.
% gen_bus   pg   qg     qmax      qmin vg mBase gen_status     pmax      pmin pc1 pc2 qc1min qc1max qc2min qc2max ramp_agc ramp_10 ramp_30 ramp_q apf
mpc.gen = [
        3  0.0  0.0    0.020    -0.020  1     1          1    0.020     0.020   0   0      0      0      0      0        0       0       0      0   0;
        4  0.0  0.0    0.020    -0.020  1     1          1    0.020     0.020   0   0      0      0      0      0        0       0       0      0   0;
        5  0.0  0.0    0.030    -0.030  1     1          1    0.030     0.030   0   0      0      0      0      0        0       0       0      0   0;
        5  0.0  0.0    0.033    -0.033  1     1          1    0.033     0.033   0   0      0      0      0      0        0       0       0      0   0;
        6  0.0  0.0    0.030    -0.030  1     1          1    0.030     0.030   0   0      0      0      0      0        0       0       0      0   0;
        7  0.0  0.0    1.500    -1.500  1     1          1    1.500     1.500   0   0      0      0      0      0        0       0       0      0   0;
        8  0.0  0.0    0.030    -0.030  1     1          1    0.030     0.030   0   0      0      0      0      0        0       0       0      0   0;
        9  0.0  0.0    0.030    -0.030  1     1          1    0.030     0.030   0   0      0      0      0      0        0       0       0      0   0;
        9  0.0  0.0    0.310    -0.310  1     1          1    0.310     0.310   0   0      0      0      0      0        0       0       0      0   0;
        9  0.0  0.0    0.212    -0.212  1     1          1    0.212     0.212   0   0      0      0      0      0        0       0       0      0   0;
       10  0.0  0.0    0.040    -0.040  1     1          1    0.040     0.040   0   0      0      0      0      0        0       0       0      0   0;
       10  0.0  0.0    0.014    -0.014  1     1          1    0.014     0.014   0   0      0      0      0      0        0       0       0      0   0;
       11  0.0  0.0    0.010    -0.010  1     1          1    0.010     0.010   0   0      0      0      0      0        0       0       0      0   0;
       15  0.0  0.0  100.000  -100.000  1     1          1  100.000  -100.000   0   0      0      0      0      0        0       0       0      0   0;
];

%% generator cost data
% model startup shutdown ncost  cost
mpc.gencost = [
      2     0.0      0.0     2   50.0  0.0;
      2     0.0      0.0     2   50.0  0.0;
      2     0.0      0.0     2   50.0  0.0;
      2     0.0      0.0     2   50.0  0.0;
      2     0.0      0.0     2   50.0  0.0;
      2     0.0      0.0     2   50.0  0.0;
      2     0.0      0.0     2   50.0  0.0;
      2     0.0      0.0     2   50.0  0.0;
      2     0.0      0.0     2   50.0  0.0;
      2     0.0      0.0     2   50.0  0.0;
      2     0.0      0.0     2   50.0  0.0;
      2     0.0      0.0     2   50.0  0.0;
      2     0.0      0.0     2   50.0  0.0;
      2     0.0      0.0     0    0.0  0.0;
];

%% branch data
% f_bus t_bus     br_r     br_x     br_b rate_a rate_b rate_c tap shift br_status angmin angmax
mpc.branch = [
      1     2  0.00353  0.00505  0.05357    9      9      9     0     0         1    -60     60;
      2     3  0.00554  0.00791  0.08397    9      9      9     0     0         1    -60     60;
      3     4  0.00076  0.00109  0.01159    9      9      9     0     0         1    -60     60;
      4     5  0.00070  0.00100  0.01064    9      9      9     0     0         1    -60     60;
      5     6  0.00193  0.00276  0.02926    9      9      9     0     0         1    -60     60;
      6     7  0.00030  0.00043  0.00456    9      9      9     0     0         0    -60     60;
      7     8  0.00209  0.00299  0.03173    9      9      9     0     0         1    -60     60;
      8     9  0.00040  0.00057  0.00608    9      9      9     0     0         1    -60     60;
      9    10  0.00096  0.00138  0.01463    9      9      9     0     0         1    -60     60;
     10    11  0.00041  0.00059  0.00627    9      9      9     0     0         1    -60     60;
     11     4  0.00061  0.00088  0.00931    9      9      9     0     0         0    -60     60;
      3     8  0.00163  0.00233  0.02470    9      9      9     0     0         1    -60     60;
     12    13  0.00612  0.00447  0.00620    7.5    7.5    7.5   0     0         1    -60     60;
     13    14  0.00374  0.00274  0.00379    7.5    7.5    7.5   0     0         1    -60     60;
     14     8  0.00251  0.00183  0.00254    7.5    7.5    7.5   0     0         0    -60     60;
     15     1  0.00048  0.00478  0.00000   25     25     25     1     0         1    -60     60;
     15    12  0.00048  0.00478  0.00000   25     25     25     1     0         1    -60     60;
];

%% add new columns to "branch" table
%column_names% tm_min tm_max
mpc.branch_oltc = [
                  0.0    0.0;
                  0.0    0.0;
                  0.0    0.0;
                  0.0    0.0;
                  0.0    0.0;
                  0.0    0.0;
                  0.0    0.0;
                  0.0    0.0;
                  0.0    0.0;
                  0.0    0.0;
                  0.0    0.0;
                  0.0    0.0;
                  0.0    0.0;
                  0.0    0.0;
                  0.0    0.0;
                  0.9    1.1;
                  0.9    1.1;
];

%% network expansion branch data
%column_names% f_bus t_bus     br_r     br_x     br_b rate_a rate_b rate_c tap shift br_status angmin angmax construction_cost replace tm_min tm_max
mpc.ne_branch = [
                  15     1  0.00024  0.00239  0.00000     50     50     50   1     0         1    -60     60          350000.0       1    0.9    1.1;
                   1     2  0.00177  0.00253  0.02679     18     18     18   0     0         1    -60     60          420000.0       1    0.0    0.0; % cost estimate: 150 k€/km, 2.8 km
                   2     3  0.00277  0.00396  0.04199     18     18     18   0     0         1    -60     60          660000.0       1    0.0    0.0; % cost estimate: 150 k€/km, 4.4 km
                   3     8  0.00082  0.00117  0.01235     18     18     18   0     0         1    -60     60          195000.0       1    0.0    0.0; % cost estimate: 150 k€/km, 1.3 km
                   7     8  0.00105  0.00150  0.01587     18     18     18   0     0         1    -60     60          255000.0       1    0.0    0.0; % cost estimate: 150 k€/km, 1.7 km
];

% hours
mpc.time_elapsed = 1.0

%% storage data
% storage_bus   ps   qs energy energy_rating charge_rating discharge_rating charge_efficiency discharge_efficiency thermal_rating    qmin   qmax    r    x p_loss q_loss status
mpc.storage = [
            5  0.0  0.0    0.0         2.400         0.600            0.600               0.9                  0.9          0.600  -0.600  0.600  0.0  0.0    0.0    0.0      1;
];

%% storage additional data
%column_names% max_energy_absorption stationary_energy_inflow stationary_energy_outflow self_discharge_rate
mpc.storage_extra = [
                                5256                        0                         0                1e-4;
];

%% ne_storage data
%column_names% storage_bus   ps   qs energy energy_rating charge_rating discharge_rating charge_efficiency discharge_efficiency thermal_rating    qmin   qmax    r    x p_loss q_loss status eq_cost inst_cost co2_cost max_energy_absorption stationary_energy_inflow stationary_energy_outflow self_discharge_rate
mpc.ne_storage = [
                        10  0.0  0.0    0.0         0.800         0.200            0.200               0.9                  0.9          0.200  -0.200  0.200  0.0  0.0    0.0    0.0      1  250000     50000      0.0                  1752                        0                         0                1e-4;
];

%% flexible load data
%column_names% load_id pf_angle e_nce_max p_red_max p_red_min p_shift_up_max p_shift_up_tot_max p_shift_down_max p_shift_down_tot_max t_grace_up t_grace_down cost_reduction cost_shift_up cost_shift_down cost_curt cost_inv flex co2_cost
mpc.load_extra = [
                     1    0.230   10000.0     3.968       0.0          9.920            10000.0            9.920              10000.0         10           10          100.0           0.0            10.0   10000.0      0.0    1      0.5
                     2    0.395   10000.0     0.100       0.0          0.251            10000.0            0.251              10000.0         10           10          100.0           0.0            10.0   10000.0      0.0    1      0.5
                     3    0.245   10000.0     0.086       0.0          0.216            10000.0            0.216              10000.0         10           10          100.0           0.0            10.0   10000.0      0.0    1      0.5
                     4    0.245   10000.0     0.146       0.0          0.364            10000.0            0.364              10000.0         10           10          100.0           0.0            10.0   10000.0      0.0    1      0.5
                     5    0.245   10000.0     0.110       0.0          0.274            10000.0            0.274              10000.0         10           10          100.0           0.0            10.0   10000.0      0.0    1      0.5
                     6    0.548   10000.0     0.015       0.0          0.039            10000.0            0.039              10000.0         10           10          100.0           0.0            10.0   10000.0      0.0    1      0.5
                     7    0.245   10000.0     0.117       0.0          0.294            10000.0            0.294              10000.0         10           10          100.0           0.0            10.0   10000.0      0.0    1      0.5
                     8    0.555   10000.0     0.115       0.0          0.287            10000.0            0.287              10000.0         10           10          100.0           0.0            10.0   10000.0      0.0    1      0.5
                     9    0.288   10000.0     0.109       0.0          0.272            10000.0            0.272              10000.0         10           10          100.0           0.0            10.0   10000.0      0.0    1      0.5
                    10    0.246   10000.0     0.066       0.0          0.165            10000.0            0.165              10000.0         10           10          100.0           0.0            10.0   10000.0      0.0    1      0.5
                    11    0.230   10000.0     4.002       0.0         10.005            10000.0           10.005              10000.0         10           10          100.0           0.0            10.0   10000.0      0.0    1      0.5
                    12    0.553   10000.0     0.007       0.0          0.017            10000.0            0.017              10000.0         10           10          100.0           0.0            10.0   10000.0      0.0    1      0.5
                    13    0.446   10000.0     0.108       0.0          0.270            10000.0            0.270              10000.0         10           10          100.0           0.0            10.0   10000.0      0.0    1      0.5
];
